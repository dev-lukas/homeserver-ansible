# Sonarr Configarr Configuration
# All German + English profiles with customizations
# NOTE: quality_profiles are defined in templates - we only add custom_formats

instance1:
  base_url: http://{{ media_services_ip }}:8989
  api_key: !secret SONARR_API_KEY

  # Delete profiles/formats not managed by Configarr
  delete_unmanaged_custom_formats:
    enabled: true
  delete_unmanaged_quality_profiles:
    enabled: true
    ignore:
      - Any  # Keep default "Any" profile as fallback

  # Include all required templates
  include:
    # Quality definitions
    - template: sonarr-quality-definition-series

    # German HD Bluray + WEB (1080p)
    - template: sonarr-v4-custom-formats-hd-bluray-web-german
    - template: sonarr-v4-quality-profile-hd-bluray-web-german

    # German HD Remux + WEB (1080p remux)
    - template: sonarr-v4-custom-formats-hd-remux-web-german
    - template: sonarr-v4-quality-profile-hd-remux-web-german

    # German UHD Bluray + WEB (4K encode)
    - template: sonarr-v4-custom-formats-uhd-bluray-web-german
    - template: sonarr-v4-quality-profile-uhd-bluray-web-german

    # German UHD Remux + WEB (4K remux)
    - template: sonarr-v4-custom-formats-uhd-remux-web-german
    - template: sonarr-v4-quality-profile-uhd-remux-web-german

    # English WEB-1080p
    - template: sonarr-v4-custom-formats-web-1080p
    - template: sonarr-v4-quality-profile-web-1080p

  # Custom format assignments (templates handle quality_profiles)
  custom_formats:
    #==========================================================================
    # BAD RELEASE GROUPS - Block for ALL profiles
    #==========================================================================
    - trash_ids:
        - 32b367365729d530ca1c124a0b180c64 # Bad Dual Groups
        - 82d40da2bc6923f41e14394075dd4b03 # No-RlsGroup
        - e1a997ddb54e3ecbfe06341ad323c458 # Obfuscated
        - 06d66ab109d4d2eddb2794d21526d140 # Retags
        - 1b3994c551cbb92a2c781af061f4ab44 # Scene
      assign_scores_to:
        - name: HD Bluray + WEB (GER)
        - name: Remux + WEB 1080p (GER)
        - name: UHD Bluray + WEB (GER)
        - name: Remux + WEB 2160p (GER)
        - name: WEB-1080p

    #==========================================================================
    # HDR / DV - Block DV without HDR fallback (UHD profiles)
    #==========================================================================
    - trash_ids:
        - 9b27ab6498ec0f31a3353992e19434ca # DV (w/o HDR fallback)
      assign_scores_to:
        - name: UHD Bluray + WEB (GER)
        - name: Remux + WEB 2160p (GER)

    #==========================================================================
    # x265 - Allow for UHD and Remux profiles (score 0 = neutral)
    #==========================================================================
    - trash_ids:
        - 9b64dff695c2115facf1b6ea59c9bd07 # x265 (HD) - allows HDR/DV only
      assign_scores_to:
        - name: Remux + WEB 1080p (GER)
        - name: UHD Bluray + WEB (GER)
        - name: Remux + WEB 2160p (GER)

    #==========================================================================
    # IMAX ENHANCED - Prefer for WEB profiles
    #==========================================================================
    - trash_ids:
        - 9f6cbff8cfe4ebbc1bde14c7b7bec0de # IMAX Enhanced
      assign_scores_to:
        - name: HD Bluray + WEB (GER)
        - name: WEB-1080p

# Anime instance - separate from main Sonarr
anime:
  base_url: http://{{ media_services_ip }}:8990
  api_key: !secret SONARR_ANIME_API_KEY

  delete_unmanaged_custom_formats:
    enabled: true
  delete_unmanaged_quality_profiles:
    enabled: true
    ignore:
      - Any

  include:
    # Anime-specific quality definitions (permissive file sizes per Trash Guides)
    - template: sonarr-quality-definition-anime
    - template: sonarr-v4-custom-formats-anime
    - template: sonarr-v4-quality-profile-anime

  custom_formats:
    # BAD RELEASE GROUPS
    - trash_ids:
        - 32b367365729d530ca1c124a0b180c64 # Bad Dual Groups
        - 82d40da2bc6923f41e14394075dd4b03 # No-RlsGroup
        - e1a997ddb54e3ecbfe06341ad323c458 # Obfuscated
        - 06d66ab109d4d2eddb2794d21526d140 # Retags
        - 1b3994c551cbb92a2c781af061f4ab44 # Scene
      assign_scores_to:
        - name: Remux-1080p - Anime

    # x265 - Prefer for Anime
    - trash_ids:
        - 47435ece6b99a0b477caf360e79ba0bb # x265 (HD)
      assign_scores_to:
        - name: Remux-1080p - Anime
          score: 600
