---
# Reverse Proxy LXC container configuration

# Container settings
reverse_proxy_vmid: 103
reverse_proxy_hostname: "reverse-proxy"
reverse_proxy_template: "local:vztmpl/debian-13-standard_13.1-2_amd64.tar.zst"
reverse_proxy_storage: "vmpool"
reverse_proxy_disk_size: "8"
reverse_proxy_memory: 512
reverse_proxy_swap: 256
reverse_proxy_cores: 2

# Network configuration
reverse_proxy_bridge: "vmbr0"
reverse_proxy_ip: "192.168.178.4"
reverse_proxy_gateway: "192.168.178.1"
reverse_proxy_netmask: "24"
reverse_proxy_internal_subnet: "192.168.178.0/24"

# Security settings
reverse_proxy_unprivileged: true
reverse_proxy_nesting: true  # Required for iptables/crowdsec

# Domain configuration
reverse_proxy_domain: "lukas-roth.dev"
reverse_proxy_email: "admin@lukas-roth.dev"

# GeoIP - Only allow traffic from Germany (for external services)
reverse_proxy_geoip_enabled: true
reverse_proxy_allowed_countries:
  - "DE"

# Backend services to proxy
# internal_only: true = only accessible from internal_subnet
# internal_only: false = accessible from internet (with GeoIP if enabled)
reverse_proxy_backends:
  - name: "homeassistant"
    subdomain: "ha"
    backend_host: "192.168.178.3"
    backend_port: 8123
    websocket: true
    internal_only: true
  - name: "adguard"
    subdomain: "adguard"
    backend_host: "192.168.178.2"
    backend_port: 3000
    websocket: false
    internal_only: true
  - name: "proxmox"
    subdomain: "proxmox"
    backend_host: "192.168.178.56"
    backend_port: 8006
    backend_protocol: "https"  # Proxmox uses HTTPS
    websocket: true  # For noVNC console
    internal_only: true
  - name: "bentopdf"
    subdomain: "pdf"
    backend_host: "192.168.178.5"
    backend_port: 8080
    websocket: false
    internal_only: true
  - name: "vert"
    subdomain: "vert"
    backend_host: "192.168.178.5"
    backend_port: 3000
    websocket: false
    internal_only: true
  - name: "mealie"
    subdomain: "recipes"
    backend_host: "192.168.178.5"
    backend_port: 9925
    websocket: false
    internal_only: true